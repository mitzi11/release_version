{"builders":[{"type":"docker","image":"centos:centos7","commit":true,"changes":["CMD [\"/bin/sh\",\"-c\",\"export JAVA_HOME=/opt/jdk/jdk1.7.0_71\"]"]}],"provisioners":[{"type":"shell","inline":["yum update -y && yum install epel-release -y && yum install -y python-devel libffi-devel openssl-devel gcc python-pip redhat-rpm-config && pip install paramiko && pip install 'ansible>=2.1.1.0,<2.1.2.0'"]},{"type":"shell","inline":["mkdir -p /tmp/ansible/roles && ln -s /tmp/ansible/roles /tmp/ansible/roles/roles"]},{"type":"ansible-local","playbook_file":"ansible/build.yml","staging_directory":"/tmp/ansible","role_paths":["ansible/roles"],"extra_arguments":["--extra-vars 'roles_path=/tmp/ansible/roles/roles' -vvvv"]}],"post-processors":[[{"type":"docker-tag","repository":"server_name:8444/build","tag":"1.0.0"},{"type":"docker-push","login":true,"login_username":"admin","login_password":"admin123","login_server":"server_name:8444"}]]}